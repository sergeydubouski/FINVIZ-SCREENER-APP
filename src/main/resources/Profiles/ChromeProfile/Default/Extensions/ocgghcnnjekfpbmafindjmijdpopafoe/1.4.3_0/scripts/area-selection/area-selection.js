"use strict";var monitor=window.monitor,capture=window.capture,guide=window.guide;try{guide.remove(),capture.remove(),monitor.remove()}catch(e){}if(capture=function(){var e,t,o,n,r,i,d;function a(a){n=a.clientX>t?t:a.clientX-1,r=a.clientY>o?o:a.clientY-1,i=Math.abs(a.clientX-t),d=Math.abs(a.clientY-o),e.style.left=n+"px",e.style.top=r+"px",e.style.width=i+"px",e.style.height=d+"px"}function u(){chrome.runtime.sendMessage({method:"captured",left:n+1,top:r+1,width:i-2,height:d-2,devicePixelRatio:window.devicePixelRatio}),guide.remove(),capture.remove(),monitor.remove()}function c(n){overlay.parentNode.removeChild(overlay),n.stopPropagation(),n.preventDefault(),(e=document.createElement("div")).setAttribute("class","itrisearch-box"),t=n.clientX,o=n.clientY,document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",u,!1),document.body.appendChild(e)}return{install:function(){document.addEventListener("mousedown",c,!1)},remove:function(){document.removeEventListener("mousedown",c,!1),document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",u,!1),e&&e.parentNode&&e.parentNode.removeChild(e)}}}(),guide=function(){var e,t,o;function n(o){var n,r;n=o.clientX,r=o.clientY,e.style.width=n+"px",t.style.height=r+"px"}return{install:function(){e=document.createElement("div"),t=document.createElement("div"),o=document.createElement("div"),e.setAttribute("class","itrisearch-guide-1"),t.setAttribute("class","itrisearch-guide-2"),o.setAttribute("class","itrisearch-guide-3"),document.body.appendChild(o),document.body.appendChild(e),document.body.appendChild(t),document.body.appendChild(overlay),document.addEventListener("mousemove",n,!1)},remove:function(){document.removeEventListener("mousemove",n,!1),e&&e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t),o&&o.parentNode&&o.parentNode.removeChild(o),overlay&&overlay.parentNode&&overlay.parentNode.removeChild(overlay),capture.remove()}}}(),monitor=function(){function e(e){27===e.keyCode&&(guide.remove(),capture.remove(),monitor.remove())}return{install:function(){window.addEventListener("keydown",e,!1)},remove:function(){window.removeEventListener("keydown",e,!1)}}}(),window.rxse&&window.rxse.areaSelectionCancel)guide.remove(),capture.remove(),monitor.remove();else{var overlay=document.createElement("div");overlay.setAttribute("class","full-page-overlay"),guide.install(),capture.install(),monitor.install()}