"undefined"!=typeof browser&&(chrome=browser),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=830)}({112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"setInterval",{enumerable:!0,get:function(){return r.setInterval}}),Object.defineProperty(t,"setTimeout",{enumerable:!0,get:function(){return r.setTimeout}}),Object.defineProperty(t,"clearTimeout",{enumerable:!0,get:function(){return r.clearTimeout}}),Object.defineProperty(t,"clearInterval",{enumerable:!0,get:function(){return r.clearInterval}});var r=n(266)},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContentScript=function(e){if(void 0===e.module)return void i.default.error('"module" property should be specified in content.es',e);if(!1===Array.isArray(e.js))return void i.default.error('"js" should be an array of functions',e);if(!1===Array.isArray(e.matches))return void i.default.error('"matches" should be an array of match patterns',e);if(void 0!==e.excludeMatches&&!1===Array.isArray(e.excludeMatches))return void i.default.error('"excludeMatches" should either be undefined or an array of match patterns',e);m.push(e)},t.runContentScripts=function(e,t,n){const r={};var o,s=u(m);try{for(s.s();!(o=s.n()).done;){const s=o.value,d=s.module,m=s.js,h=n.app.modules[d]||{isEnabled:!1};if(h.isEnabled&&f(e,s)){var a,l=u(m);try{for(l.s();!(a=l.n()).done;){const o=a.value;try{const i=o(e,t,n)||{};r[d]=c({},r[d],{},i)}catch(e){i.default.error(`CLIQZ content-script failed: ${e} ${e.stack}`)}}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){s.e(e)}finally{s.f()}return r};var r=s(n(835)),o=n(461),i=s(n(836));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!1===(0,o.isTopWindow)(e)&&!0!==t.allFrames)return!1;let n=e.location.href;if("about:blank"===n||"about:srcdoc"===n){if(!0!==t.matchAboutBlank)return!1;if(!e.parent)return!1;n=e.parent.location.href}if(void 0!==t.excludeMatches){var i,s=u(t.excludeMatches);try{for(s.s();!(i=s.n()).done;){const e=i.value;if((0,r.default)(e,n))return!1}}catch(e){s.e(e)}finally{s.f()}}var a,c=u(t.matches);try{for(c.s();!(a=c.n()).done;){const e=a.value;if((0,r.default)(e,n))return!0}}catch(e){c.e(e)}finally{c.f()}return!1}const m=[]},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(232))&&r.__esModule?r:{default:r};
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
var i=("undefined"!=typeof browser?browser:o.default).runtime;t.default=i},232:function(e,t,n){var r,o,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[e],void 0===(i="function"==typeof(r=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class o extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(e.runtime.lastError):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},s=e=>1==e?"argument":"arguments",a=(e,t,n)=>new Proxy(t,{apply:(t,r,o)=>n.call(r,e,...o)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},n={})=>{let r=Object.create(null),o={has:(t,n)=>n in e||n in r,get(o,u,d){if(u in r)return r[u];if(!(u in e))return;let f=e[u];if("function"==typeof f)if("function"==typeof t[u])f=a(e,e[u],t[u]);else if(c(n,u)){let t=((e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((o,s)=>{if(t.fallbackToNoCallback)try{n[e](...r,i({resolve:o,reject:s},t))}catch(i){console.warn(e+" API method doesn't seem to support the callback parameter, falling back to call it without a callback: ",i),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(n[e](...r),o()):n[e](...r,i({resolve:o,reject:s},t))})})(u,n[u]);f=a(e,e[u],t)}else f=f.bind(e);else if("object"==typeof f&&null!==f&&(c(t,u)||c(n,u)))f=l(f,t[u],n[u]);else{if(!c(n,"*"))return Object.defineProperty(r,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(t){e[u]=t}}),f;f=l(f,t[u],n["*"])}return r[u]=f,f},set:(t,n,o,i)=>(n in r?r[n]=o:e[n]=o,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},u=Object.create(e);return new Proxy(u,o)},u=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}});let d=!1;const f=new o(e=>"function"!=typeof e?e:function(t,r,o){let i,s,a=!1,c=new Promise(e=>{i=function(t){d||(console.warn(n,(new Error).stack),d=!0),a=!0,e(t)}});try{s=e(t,r,i)}catch(e){s=Promise.reject(e)}const l=!0!==s&&(u=s)&&"object"==typeof u&&"function"==typeof u.then;var u;if(!0!==s&&!l&&!a)return!1;const f=e=>{e.then(e=>{o(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",o({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return f(l?s:c),!0}),m=({reject:n,resolve:r},o)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(e.runtime.lastError):o&&o.__mozWebExtensionPolyfillReject__?n(new Error(o.message)):r(o)},h=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${s(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${s(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((e,t)=>{const o=m.bind(null,{resolve:e,reject:t});r.push(o),n.sendMessage(...r)})},g={runtime:{onMessage:u(f),onMessageExternal:u(f),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},l(e,g,r)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=r(chrome)}else e.exports=browser})?r.apply(t,o):r)||(e.exports=i)},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInterval=t.clearTimeout=t.setInterval=t.setTimeout=void 0;t.setTimeout=function(){return("undefined"==typeof setTimeout?window.setTimeout.bind(window):setTimeout)(...arguments)};t.setInterval=function(){return("undefined"==typeof setInterval?window.setInterval.bind(window):setInterval)(...arguments)};t.clearTimeout=function(){return("undefined"==typeof clearTimeout?window.clearTimeout.bind(window):clearTimeout)(...arguments)};t.clearInterval=function(){return("undefined"==typeof clearInterval?window.clearInterval.bind(window):clearInterval)(...arguments)}},289:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.isAmazonDomain=function(e){return i.test(e)},t.isEbayDomain=function(e){return s.test(e)},t.callWhenDOMContentLoaded=t.stripUrlHash=void 0;const i=/(^|\.)amazon\..{2,6}$/i;const s=/(^|\.)ebay\..{2,6}$/i;t.stripUrlHash=e=>{const t=e.indexOf("#");return t<0?e:e.slice(0,t)};t.callWhenDOMContentLoaded=e=>new Promise(t=>window.addEventListener("DOMContentLoaded",o((function*(){try{yield e()}catch(e){}finally{t()}})),{once:!0}))},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={platform:"webextension",brocfile:"Brocfile.ghostery.js",baseURL:"/cliqz/",pack:"npm pack",publish:'echo "Uploading version: browser-core-$PACKAGE_VERSION.tgz" && aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH/latest.tgz --acl public-read',sourceMaps:!1,format:"common",settings:{ANOLYSIS_BACKEND_URL:"https://anolysis.privacy.ghostery.net",ANOLYSIS_STAGING_BACKEND_URL:"https://anolysis-staging.privacy.ghostery.net",BACKGROUND_IMAGE_URL:"https://cdn.ghostery.net/brands-database/database/",BW_URL:"https://antiphishing.ghostery.net/api/v1/",CDN_BASEURL:"https://cdn.ghostery.net",ADBLOCKER_BASE_URL:"https://cdn.ghostery.com/adblocker/configs",ANTITRACKING_BASE_URL:"https://cdn.ghostery.com/antitracking",CONFIG_PROVIDER:"https://api.ghostery.net/api/v1/config",ENDPOINT_ANONPATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz",ENDPOINT_HPNV2_DIRECT:"https://collector-hpn.ghostery.net",ENDPOINT_HPNV2_ANONYMOUS:"https://collector-hpn.ghostery.net",ENDPOINT_HUMAN_WEB_PATTERNS:"https://cdn2.ghostery.com/human-web-chromium/hw-patterns.gz",ENDPOINT_PATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns.gz",ENDPOINT_SAFE_QUORUM_ENDPOINT:"https://safe-browsing-quorum.privacy.ghostery.net/",ENDPOINT_SAFE_QUORUM_PROVIDER:"https://safe-browsing-quorum.privacy.ghostery.net/config",FEEDBACK:"https://ghostery.net/feedback/",HB_NEWS:"hb-news.ghostery.net",OFFERS_BE_BASE_URL:"https://offers-api.ghostery.net",OFFERS_STAGING_BASE_URL:"https://offers-api-staging-myo.myoffrz.ninja",PRIVACY_SCORE_URL:"https://anti-tracking.ghostery.net/api/v1/score?",TRACKER_SCORE_URL:"https://cdn.ghostery.net/privacy-score/privacy_score.json",RESULTS_PROVIDER:"https://api.ghostery.net/api/v2/results?nrh=1&q=",RESULTS_PROVIDER_LOG:"https://api.ghostery.net/api/v1/logging?q=",RICH_HEADER:"https://api.ghostery.net/api/v2/rich-header?path=/v2/map",ROTATED_TOP_NEWS:"rotated-top-news.ghostery.net",SAFE_BROWSING:"https://safe-browsing.ghostery.net",STATISTICS:"https://stats.ghostery.net",SUGGESTIONS_URL:"https://ghostery.net/search?q=",UNINSTALL:"https://ghostery.net/home/offboarding",WTM_API:"https://whotracks.me/data/",ANTIPHISHING_BLOOMFILTER:"https://cdn.ghostery.net/anti-phishing/bloom_filter.json.gz",SUPPORT_URL:"https://www.ghostery.com/support/",PRIVACY_POLICY_URL:"https://www.ghostery.com/about-ghostery/privacy-statements/",NEW_TAB_URL:"/freshtab/home.html",channel:"CH80",MSGCHANNEL:"web-extension",OFFERS_CHANNEL:"ghostery",URL_CHANGED_EVENT_DEBOUNCE:500,ENABLE_OFFER_COLLECTIONS:!1,MAX_GROUPS_IN_OFFER_COLLECTIONS:3,ATTRACK_TELEMETRY_PROVIDER:"hpnv2",HW_CHANNEL:"ghostery",ALLOWED_COUNTRY_CODES:["de","at","ch","es","us","fr","nl","gb","it","be","se","dk","fi","cz","gr","hu","ro","no","ca","au","ru","ua","in","pl","jp","br","mx","cn","ar"],antitrackingPlaceholder:"ghostery",antitrackingHeader:"Ghostery-AntiTracking",telemetry:{demographics:{brand:"ghostery",name:"extension"}},HUMAN_WEB_LITE_COLLECTOR_VIA_PROXY:"https://collector-hpn.ghostery.net",HUMAN_WEB_LITE_COLLECTOR_DIRECT:"https://collector-hpn.ghostery.net",frameScriptWhitelist:[]},default_prefs:{"modules.human-web.enabled":!0,"modules.offers-v2.enabled":!0,"modules.antitracking.enabled":!0,"modules.anti-phishing.enabled":!1,"modules.adblocker.enabled":!0,"modules.insights.enabled":!1,offersLogsEnabled:!0,"cliqz-adb":1,attrackBloomFilter:!0,humanWeb:!0,"cliqz-anti-phishing":!0,"cliqz-anti-phishing-enabled":!0,attrackTelemetryMode:1,attrackDefaultAction:"placeholder",sendAntiTrackingHeader:!1,telemetry:!1,attrackCookieTrustReferers:!0,"attrack.cookieMode":"ghostery","modules.offers-templates.enabled":!1},bundles:["core/content-script.bundle.js","hpnv2/worker.wasm.bundle.js","hpnv2/worker.asmjs.bundle.js","human-web/rusha.bundle.js","offers-templates/offers-reminder.bundle.js","offers-templates/offers-checkout.bundle.js","offers-templates/offers-control-center.bundle.js","offers-templates/offers-control-center-after.bundle.js","offers-v2/environment.bundle.js"],modules:["core","human-web","hpnv2","antitracking","webrequest-pipeline","offers-v2","offers-banner","offers-templates","adblocker","anolysis","anti-phishing","myoffrz-helper","insights","hpn-lite","human-web-lite"],buildTargets:{firefox:52},environment:"production",isBeta:!1,EXTENSION_VERSION:"7.47.4",VERSION:"7.47.4"}},357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){return new Promise(t=>(0,r.setTimeout)(t,e))};var r=n(112)},364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeAclkUrl=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){const t=e.split("aclk?");if(2!==t.length)throw new Error('Expected Google pagead "aclk" URL. Instead got: '+e);return t[1].replace(/ved=.*&/,"").replace(/&q=&adurl=$/,"").replace(/&adurl=&q=$/,"")}},383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.walkDomTreeDepthFirst=function(e,t,n){const r=[e];for(;r.length;){const e=r.shift();t(e,n)&&r.unshift.apply(r,e.childNodes)}},t.getWindowOfHtmlNode=function(e){return e.ownerDocument.defaultView||e.ownerDocument.parentWindow},Object.defineProperty(t,"getCouponsForm",{enumerable:!0,get:function(){return r.getCouponsForm}}),t.getPurchaseButtons=void 0;var r=n(843);const o=["buy","kaufen","bestellen","order","book","buchen"];t.getPurchaseButtons=e=>{if(e.location.href.split(/[/|-]/).length>8)return[];const t=e.document,n=[],r=["button",'input[type="button"]','input[type="submit"]','a[href*="checkout"]'].join(", ");return t.querySelectorAll(r).forEach(e=>{!e.hidden&&e.offsetHeight>20&&function(e){let t=e.value||e.textContent;if(0===t.length&&e.parentElement&&(t=e.parentElement.value||e.parentElement.textContent),t=t.trim().toLowerCase(),!t)return!1;if(t.length>50)return!1;let n=t.split(/\s+/);return n=n.filter(e=>o.indexOf(e)>-1),n.length>0}(e)&&n.push(e)}),n}},461:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTopWindow=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){return e.self===e.top},t.documentBodyReady=function(){if(window.document&&window.document.body)return Promise.resolve();return new Promise(e=>{window.addEventListener("DOMContentLoaded",e,{once:!0})})}},462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=t.chrome=void 0;
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
const r="undefined"!=typeof browser?browser:chrome;t.chrome=r;const o=window;t.window=o},463:function(e,t,n){"use strict";function r(e,t,n){const r="string"==typeof t?e.document.getElementById(t):e.document.documentElement;r&&r.style.setProperty("margin",n,"important")}Object.defineProperty(t,"__esModule",{value:!0}),t.beforeIframeShown=function(e){r(e,null,"115px 0");e.document.location.hostname.includes("google")&&(r(e,"viewport","115px 0"),r(e,"searchform","115px 0"))},t.afterIframeRemoved=function(e){r(e,null,"0 0");e.document.location.hostname.includes("google")&&(r(e,"viewport","0 0"),r(e,"searchform","0 0"))},t.onScroll=function(e,t){e.document.location.hostname.includes("google")&&(t>=115?(r(e,"viewport","0 0"),r(e,"searchform","0 0")):(r(e,"viewport","115px 0"),r(e,"searchform","115px 0")))}},464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=function(e,t){let n=t.tag,r=t.className,o=t.textContent,i=t.id;const s=e.document.createElement(n);r&&s.classList.add(r);o&&(s.textContent=o);i&&(s.id=i);return s},t.once=function(e){let t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(this,r)}}},t.findCounponForm=o,t.injectCode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,r.getCouponsForm)(e,t),o=n.ok,a=n.input,c=n.button;if(!o||!t.code)return;a.value=t.code,i(e,a),s(e,c,t.clickEvent)},t.retryFunctionSeveralTimes=function(e,t){let n=0;return new Promise(r=>{!function o(){const i=t(),s=i.result;i.tryAgain&&n<4?(n+=1,e.setTimeout(o,1e3)):r(s)}()})},t.tryToFindCoupon=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=o(e,t),r=n.payload,i=void 0===r?{}:r,s=i.canInject,a=!s&&t.isDynamicPage;return{result:n,tryAgain:a}};var r=n(854);function o(e,t){const n=(0,r.getCouponsForm)(e,t),o=n.ok,i=n.input;return o&&Boolean(i.value)?{ok:!1}:{ok:!0,payload:{canInject:o}}}function i(e,t){const n=e.document.createEvent("Event");n.initEvent("change",!1,!0),t.dispatchEvent(n)}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if(t.click&&"click"===n)t.click();else{const r=e.document.createEvent("Event");r.initEvent(n,!0,!0),t.dispatchEvent(r)}}},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t,n){let r,o;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];const c=Date.now();r&&c<r+n?(e.clearTimeout(o),o=e.setTimeout(()=>{r=c,t(...s)},n)):(r=c,t(...s))}},t.debounce=function(e,t){let n=null;return t?function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];(0,i.clearTimeout)(n);const a=()=>{n=null,e(...o)};n=(0,i.setTimeout)(a,t)}:e},t.deadline=function(e,t){return Promise.race([(0,o.default)(t),e])},t.nextTick=c,t.nextIdle=function(){if("undefined"==typeof window||!window.requestIdleCallback)return c(()=>{});return new Promise(e=>{window.requestIdleCallback(e)})},t.withTimeout=l,t.tryPromise=function(e){return d.apply(this,arguments)};var r,o=(r=n(357))&&r.__esModule?r:{default:r},i=n(112);function s(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)}))}}function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Promise.resolve().then(()=>e(...n))}function l(e,t){return u.apply(this,arguments)}function u(){return(u=a((function*(e,t){let n;try{return n=new Promise((e,n)=>{(0,i.setTimeout)(()=>n(new Error(`Timed out after ${t/1e3} seconds`)),t)}),yield Promise.race([e,n])}finally{(0,i.clearTimeout)(n)}}))).apply(this,arguments)}function d(){return(d=a((function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;try{return yield l(e,t)}catch(e){return"Failed: "+e}}))).apply(this,arguments)}},830:function(e,t,n){e.exports=n(831)},831:function(e,t,n){"use strict";n.r(t);n(832)},832:function(e,t,n){"use strict";var r;n(833),
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
(0,((r=n(865))&&r.__esModule?r:{default:r}).default)()},833:function(e,t,n){"use strict";n(834),n(837),n(838),n(839),n(850),n(860),n(862),n(863),n(864)},834:function(e,t,n){"use strict";var r=n(461);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){const n=[];if(window.parent!==window&&window.document&&window.document.scripts)for(let e=0;e<window.document.scripts.length;e+=1){const t=window.document.scripts[e].src;t.startsWith("http")&&n.push(t)}let r=e.target;1!==r.nodeType&&(r=r.parentNode);let o=null;r.closest("a[href]")&&(o=r.closest("a[href]").getAttribute("href"));const i={target:{baseURI:e.target.baseURI,value:e.target.value,href:e.target.href,parentNode:{href:e.target.parentNode?e.target.parentNode.href:null},linksSrc:n}};t.app.modules.core.action("recordMouseDown",i,function(e){let t,n=e.target;try{for(let e=0;e<5;e+=1){if(t=n.innerHTML,-1!==t.indexOf("http://")||-1!==t.indexOf("https://"))return t;n=n.parentNode,e+=1}}catch(e){}}(e),o)}function c(){return window.document.documentElement.outerHTML}function l(e){const t=window.document.querySelector(e);try{return t.click(),!0}catch(e){return!1}}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.shadowRootSelector,o=void 0===r?null:r,s=n.attributeType,a=void 0===s?"property":s;const c=o?window.document.querySelector(o).shadowRoot:window.document,l=t.split(","),u=(e,t)=>"property"===a?e[t]:e.getAttribute(t);return Array.prototype.map.call(c.querySelectorAll(e),e=>l.length>1?l.reduce((t,n)=>i({},t,{[n]:u(e,n)}),{}):u(e,t))}function d(e){const t=window.document;return Array.prototype.map.call(t.querySelectorAll(e),e=>window.getComputedStyle(e))}(0,n(152).registerContentScript)({module:"core",matches:["<all_urls>"],allFrames:!0,matchAboutBlank:!0,js:[(e,t,n)=>{const o=e=>{a(e,n)};e.addEventListener("mousedown",o);const i=()=>{!function(e,t){if(!(0,r.isTopWindow)(e))return;const n=e.document.getElementsByTagName("html").item(0).getAttribute("lang"),o=e.document.querySelector("title"),i=e.document.querySelector("meta[name=description]"),s=e.document.querySelector('meta[property="og:title"]'),a=e.document.querySelector('meta[property="og:description"]'),c=e.document.querySelector('meta[property="og:image"]');t.app.modules.core.action("recordMeta",e.location.href,{title:o&&o.innerHTML,description:i&&i.content,ogTitle:s&&s.content,ogDescription:a&&a.content,ogImage:c&&c.content,lang:n})}(e,n)};return e.addEventListener("DOMContentLoaded",i),e.addEventListener("unload",()=>{e.removeEventListener("mousedown",o),e.removeEventListener("DOMContentLoaded",i)},{once:!0}),{getHTML:c,click:l,queryHTML:u,queryComputedStyle:d}}]})},835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=new URL(t),s=n.protocol,a=n.hostname,c=n.pathname,l=n.search,u=function(e){if("<all_urls>"===e)return{scheme:r,host:null,path:null};const t=e.indexOf("://");if(-1===t)throw new Error('<scheme> missing, "://" not found');const n=e.slice(0,t),s=function(e){if("*"===e)return new Set(["http","https","ws","wss"]);if(r.has(e))return new Set([e]);throw new Error("<scheme> is not valid: "+e)}(n),a=e.indexOf("/",t+3);if(-1===a)throw new Error('<path> missing, "/" not found');const c=e.slice(t+3,a),l=function(e,t){if(t.includes(":"))throw new Error("<host> must not include a port number");if(0===t.length){if("file"===e)return/^$/;throw new Error('<host> is optional only if the scheme is "file"')}const n=t.lastIndexOf("*");if(-1!==n){if("*"===t)return null;if(0!==n)throw new Error("<host> wildcard may only appear at the start");if("."!==t[1])throw new Error('<host> only "*" and "*." followed by hostname parts are valid');const e=t.slice(2);if(!1===o.test(e))throw new Error("<host> contains invalid characters");return new RegExp(`^(?:.*[.])?${i(e)}$`)}if(!1===o.test(t))throw new Error("<host> contains invalid characters");return new RegExp(`^${i(t)}$`)}(n,c),u=function(e){return new RegExp(`^${i(e)}$`)}(e.slice(a+1));return{scheme:s,host:l,path:u}}(e);if(!1===u.scheme.has(s.slice(0,s.length-1)))return!1;if(null!==u.host&&!1===u.host.test(a))return!1;if(null!==u.path&&!1===u.path.test(`${c.slice(1)}${l}`))return!1;return!0};
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
const r=new Set(["http","https","ws","wss","ftp","ftps","data","file"]),o=/^[.\w_-]+$/;function i(e){return e.replace(/([|.$+?{}()[\]\\])/g,"\\$1").replace(/\*/g,".*")}},836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(462);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function i(){}var s="development"===((r=n(32))&&r.__esModule?r:{default:r}).default.environment?o.window.console:new Proxy({},{get:()=>i});t.default=s},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDom=l;var r,o=(r=n(202))&&r.__esModule?r:{default:r},i=n(152),s=n(83),a=n(364);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function c(e){window.console.error("[human-web] Exception caught:",e)}function l(e,t,n){const r=t.document;try{let e=null;if(e=r.querySelector("script"),e&&e.innerHTML.indexOf("location.replace")>-1){const e=r.querySelector("title").textContent;o.default.sendMessage({module:"human-web",action:"jsRedirect",args:[{message:{location:e,url:r.location.href}}]})}}catch(e){c(e)}try{let e="",t=!1;r.querySelector("#s0p1c0")&&(e=r.querySelector("#s0p1c0").href),r.querySelector("#tads .ads-ad")&&null===r.querySelector("#tads .ads-ad").offsetParent&&(t=!0);const o={type:"dom",ad:e,hidden:t};n.action("contentScriptTopAds",{message:o})}catch(e){c(e)}try{const e={},r=t.document;let o=0;const i={query:{element:"#rso",attribute:"data-async-context"},adSections:[".ads-ad",".pla-unit-container",".pla-hovercard-content-ellip",".cu-container tr"],0:{cu:".ad_cclk a[id^='s0p'],.ad_cclk a[id^='n1s0p'],.ad_cclk a[id^='s3p']",fu:".ad_cclk a[id^='vs0p'],.ad_cclk a[id^='vn1s0p'],.ad_cclk a[id^='vs3p']"},1:{cu:"a[id^='plaurlg']",fu:"a[id^='vplaurlg']"},2:{cu:"a[id^='plaurlh']",fu:"a[id^='vplaurlh']"},3:{cu:"a[id^='plaurlt']",fu:"a[id^='vplaurlt']"}},s=r.querySelector(i.query.element);let c="";if(s){c=s.getAttribute(i.query.attribute).replace("query:","");try{c=decodeURIComponent(c)}catch(e){}}i.adSections.forEach((t,n)=>{Array.prototype.slice.call(r.querySelectorAll(t)).forEach(t=>{const r=i[n].cu,s=i[n].fu,l=t.querySelector(r),u=t.querySelector(s);if(l&&u){const t=(0,a.normalizeAclkUrl)(l.href);e[t]={ts:Date.now(),query:c,furl:[u.getAttribute("data-preconnect-urls"),u.href]},o+=1}})}),o>0&&n.action("adClick",{ads:e})}catch(e){c(e)}}(0,i.registerContentScript)({module:"human-web",matches:["http://*/*","https://*/*"],js:[function(e,t,n){e.location.href;const r=n.app.modules["human-web"];function o(e){return t=>{r.action(e,{target:{baseURI:t.target.baseURI}})}}e.top===e&&e.addEventListener("DOMContentLoaded",()=>{l(0,e,r)});const i=(0,s.throttle)(e,o("hw:keypress"),250),a=(0,s.throttle)(e,o("hw:mousemove"),250),c=(0,s.throttle)(e,o("hw:scroll"),250),u=(0,s.throttle)(e,o("hw:copy"),250);e.addEventListener("keypress",i),e.addEventListener("mousemove",a),e.addEventListener("scroll",c),e.addEventListener("copy",u),e.addEventListener("unload",(function(t){if(!t||t.target===e.document){try{String(e)}catch(e){return}e.removeEventListener("keypress",i),e.removeEventListener("mousemove",a),e.removeEventListener("scroll",c),e.removeEventListener("copy",u)}}))}],allFrames:!0})},838:function(e,t,n){
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */},839:function(e,t,n){"use strict";var r,o,i=n(152),s=g(n(32)),a=g(n(840)),c=g(n(845)),l=n(846),u=n(847),d=n(848),f=n(383),m=g(n(849)),h=n(289);function g(e){return e&&e.__esModule?e:{default:e}}(0,i.registerContentScript)({module:"offers-v2",matches:["https://*/*","http://*/*"],js:[function(e,t,n){if(e.parent!==e)return;const r=()=>{!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n.app.modules["offers-v2"].action(e,...r)}("onContentSignal",{action:"purchase",state:"attempted"})},o=()=>{const t=(0,f.getPurchaseButtons)(e);t.length>5||t.length>0&&t.forEach(e=>{e.addEventListener("click",r)})},i=()=>{e.removeEventListener("unload",i),e.removeEventListener("load",o)};e.addEventListener("load",o),e.addEventListener("unload",i)},a.default,...s.default.settings["offers.user-journey.enabled"]?[l.serpPageDetection,u.shopPageDetection,d.classifyByOutgoingLinks]:[]]}),(0,i.registerContentScript)({module:"offers-v2",matches:["https://*/*"],js:[c.default]});const p="chip"===(null===(r=s.default.settings)||void 0===r?void 0:r.OFFERS_CHANNEL)&&(null===(o=s.default.settings)||void 0===o?void 0:o.ONBOARDING_URL);p&&(0,i.registerContentScript)({module:"offers-v2",matches:[(0,h.stripUrlHash)(p)+"*"],js:[m.default]})},840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const r=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.app.modules["offers-v2"].action(e,...r)},i=e.location.href;let s=null;const a=()=>{s&&(s.unload(),s=null)};return e.addEventListener("unload",a,{once:!0}),{"detect-coupon-actions":t=>{let n=t.offerInfo;s||(s=new o.default({offerInfo:n,window:e,onSubmitCoupon:e=>{r("couponFormUsed",{type:"coupon_submitted",offerInfo:n,couponValue:e,url:i})},onFormFound:e=>{r("couponFormUsed",{type:e?"coupon_form_found":"coupon_form_not_found",offerInfo:n,url:i})},onDescribePrices:e=>{r("couponFormUsed",{type:"coupon_form_prices",offerInfo:n,couponValue:e,url:i})},onCouponFailedDueMinimalValue:()=>{r("couponFormUsed",{type:"coupon_fail_minimal_basket_value",offerInfo:n,url:i})}})),s.processForms(),s.isCouponFormFound()&&s.describePrices(),s.isCouponFormFound()||n.isDynamicPage?s.startObserve():a()}}};var r,o=(r=n(841))&&r.__esModule?r:{default:r}},841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(842))&&r.__esModule?r:{default:r},i=n(383),s=n(844);function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=class{constructor(e){let t=e.window,n=e.offerInfo,r=e.onSubmitCoupon,o=e.onFormFound,i=e.onDescribePrices,s=e.onCouponFailedDueMinimalValue;this.window=t,this.offerInfo=n,this.onSubmitCoupon=r,this.onFormFound=o,this.onDescribePrices=i,this.onCouponFailedDueMinimalValue=s,this._onMutations=this._onMutations.bind(this),this._onSubmitCoupon=this._onSubmitCoupon.bind(this),this.mutationObserver=null,this.coupon=null}startObserve(){this.mutationObserver=new this.window.MutationObserver(this._onMutations),this.mutationObserver.observe(this.window.document,{childList:!0,subtree:!0})}_onSubmitCoupon(e){this.onSubmitCoupon(e)}unload(){this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=null,this.coupon&&this.coupon.unload(),this.coupon=null,this.offerInfo=null,this.window=null,this.onSubmitCoupon=null,this.onFormFound=null,this.onDescribePrices=null,this.onCouponFailedDueMinimalValue=null}_doesLookLikeAddition(e){if(s.skipTagsWhenPriceWalk.has(e.tagName))return!1;const t=e.textContent;return t&&""!==t.trim()}_onMutations(e){let t=!1;var n,r=a(e);try{for(r.s();!(n=r.n()).done;){var o,i=a(n.value.addedNodes);try{for(i.s();!(o=i.n()).done;){const e=o.value;if(this._doesLookLikeAddition(e)&&(t=!0),(0,s.isMessageAboutNotEnoughBasketValue)(e)){this.onCouponFailedDueMinimalValue();break}}}catch(e){i.e(e)}finally{i.f()}}}catch(e){r.e(e)}finally{r.f()}t&&(this.isCouponFormFound()||this.processForms(),this.isCouponFormFound()&&this.describePrices())}describePrices(){this.onDescribePrices((0,s.describePrices)(this.window,this.offerInfo))}processForms(){this.coupon&&(this.coupon.unload(),this.coupon=null);const e=(0,i.getCouponsForm)(this.window,this.offerInfo),t=e.input,n=e.button,r=e.ok;this.onFormFound(r),r&&(this.coupon=new o.default({input:t,button:n,clickEvent:this.offerInfo.clickEvent,onClick:this._onSubmitCoupon}))}isCouponFormFound(){return this.coupon}}},842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(e){let t=e.input,n=e.button,r=e.clickEvent,o=e.onClick;var i,s,a;a=e=>{if(!e||e.type!==this.clickEvent)return;const t=this.input?this.input.value:"";this.onClick&&this.onClick(t)},(s="_clickCb")in(i=this)?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,this.input=t,this.button=n,this.onClick=o,this.clickEvent=r||"click",this.button&&this.button.addEventListener(this.clickEvent,this._clickCb)}unload(){this.button&&this.button.removeEventListener(this.clickEvent,this._clickCb),this.button=null,this.input=null,this.onClick=null}}},843:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementByConfigFieldName=i,t.getCouponsForm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.document,r=i(n,t.inputID),s=i(n,t.submitID);if(r&&s)return{ok:!0,input:r,button:s};const a=[...e.document.querySelectorAll("form")],c=a.reduce((e,t)=>t?e.ok?e:o(t,r,s):e,{ok:!1,input:null,button:null});return c};const r=["voucher","discount","coupon","rabatt","gutschein","promo"];function o(e,t,n){let o=t;if(!t){const t=function(e){const t=e.querySelectorAll("input"),n=(e,t)=>e&&e.toLowerCase().includes(t);return[...t].filter(e=>"hidden"!==e.type&&"password"!==e.type&&r.some(t=>n(e.name,t)||n(e.id,t)))}(e);if(1!==t.length)return{ok:!1,input:null,button:null};o=t[0]}let i=n;if(!n){const t=function(e){let t=e.querySelectorAll("button");return t.length||(t=e.querySelectorAll("input[type=submit]")),t}(e);if(1!==t.length&&2!==t.length)return{ok:!1,input:null,button:null};i=t[0]}return{ok:!0,input:o,button:i}}function i(e,t){return t?e.getElementById(t)||e.querySelector(t):null}},844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._extractPrices=y,t.isMessageAboutNotEnoughBasketValue=function(e){const t=e.textContent.toLowerCase();if(t.length>80)return!1;return u.some(e=>t.includes(e))},t.guessTotal=p,t.describePrices=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.totalSelector,r=void 0===n?void 0:n;if(r){const t=e.document.querySelector(r);if(!t)return{};return{total:h(t.textContent)}}const o=y(e.document.body);return p(o)},t.skipTagsWhenPriceWalk=void 0;var r=n(383);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const u=["mindest","minimal"];function d(e,t){return e.getComputedStyle(t).getPropertyValue("text-decoration").includes("line-through")}const f=/((\d+)[.,](\d+))(.)?/g,m=new Set(["SCRIPT","STYLE","IFRAME"]);function h(e){f.lastIndex=0;const t=f.exec(e);if(!t)return;if(f.test(e))return;if(t[2].length>5||2!==t[3].length||"."===t[4])return;const n=t[1];return parseFloat(n.replace(",","."))}function g(e,t){if(m.has(e.tagName))return!1;if(3!==e.nodeType)return!0;const n=h(e.nodeValue);if(void 0===n)return!1;const o=(0,r.getWindowOfHtmlNode)(e);for(let t=e.parentElement,n=0;t&&n<3;t=t.parentElement,n+=1)if(d(o,t))return!1;return t.push(n),!1}function p(e){const t=e.reduce((e,t,n)=>t>=(e.top||0)?{top:t,topIdx:n}:t>(e.vice||0)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vice:t,viceIdx:n}):e,{}),n=t.top;if(!t.viceIdx)return{total:n};const r=t.vice;var c,l=a(function*(e){var t,n=a(e);try{for(n.s();!(t=n.n()).done;){const e=t.value;yield[0,e]}}catch(e){n.e(e)}finally{n.f()}if(!(e.length>8)){var r,o=a(e);try{for(o.s();!(r=o.n()).done;){const t=r.value;var i,s=a(e);try{for(s.s();!(i=s.n()).done;){const e=i.value;yield[t,e]}}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}}}(e.slice(t.topIdx+1,t.viceIdx)));try{for(l.s();!(c=l.n()).done;){const e=o(c.value,2),t=e[0],i=n+t-e[1]-r;if(Math.abs(i)<.01)return{base:n,total:r}}}catch(e){l.e(e)}finally{l.f()}return{total:t.top}}function y(e){const t=[];return(0,r.walkDomTreeDepthFirst)(e,g,t),t}t.skipTagsWhenPriceWalk=m},845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(289);var o=function(e,t,n){if(e.parent!==e)return;if(!(0,r.isAmazonDomain)(e.location.hostname))return;e.addEventListener("DOMContentLoaded",()=>{(function(e){return[...e.getElementsByTagName("a")].some(e=>e.href&&e.href.endsWith("/ref=nav_logo_prime"))})(e.document)&&n.app.modules["offers-v2"].action("learnTargeting","AmazonPrime")},{once:!0})};t.default=o},846:function(e,t,n){"use strict";function r(e){const t=function(e){return e.querySelectorAll("input[type=text], input[type=search]")}(e);return function(e,t){if(!t.length)return!1;const n=e.title.toLowerCase();return["search","suche"].some(e=>n.includes(e))}(e,t)||function(e,t){return Array.from(t,e=>e.name).some(t=>{const n=e.location.search;return n.includes(`&${t}=`)||n.includes(`?${t}=`)})}(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isSearchResultPage=r,t.serpPageDetection=function(e,t,n){if(e.parent!==e)return;e.addEventListener("DOMContentLoaded",()=>{r(e.document)&&n.app.modules["offers-v2"].action("learnTargeting","page-class",{feature:"serp",url:e.document.location.href})},{once:!0})}},847:function(e,t,n){"use strict";function r(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,s=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.isShopPage=l,t.shopPageDetection=function(e,t,n){if(e.parent!==e)return;e.addEventListener("DOMContentLoaded",()=>{l(e.document)&&n.app.modules["offers-v2"].action("learnTargeting","page-class",{feature:"shop",url:e.document.location.href,referrer:e.document.referrer})},{once:!0})};const i=/\bshop\b/i,s=/\bcart\b/i,a=/\bbasket\b/i,c=/\bwarenkorb\b/i;function l(e){return function(e){return i.test(e.title)}(e)||function(e){var t,n=r(e.querySelectorAll("*[class*=cart], *[class*=basket]"));try{for(n.s();!(t=n.n()).done;){const e=t.value.className;if(s.test(e)||a.test(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}(e)||function(e){var t,n=r(e.querySelectorAll('\n    img[src*="cart"],\n    img[src*="warenkorb"],\n    img[title*="art"],\n    img[title*="arenkorb"],\n    img[alt*="art"],\n    img[alt*="arenkorb"]\n   '));try{for(n.s();!(t=n.n()).done;){const e=t.value;for(var o=0,i=[s,c];o<i.length;o++){const t=i[o];for(var a=0,l=[e.src,e.title,e.alt];a<l.length;a++){const e=l[a];if(t.test(e))return!0}}}}catch(e){n.e(e)}finally{n.f()}return!1}(e)}},848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.classifyOutgoingLinks=o,t.classifyByOutgoingLinks=function(e,t,n){if(e.parent!==e)return;e.addEventListener("DOMContentLoaded",()=>{o(e.document).forEach(t=>n.app.modules["offers-v2"].action("learnTargeting","page-class",{feature:t,url:e.document.location.href}))},{once:!0})};var r=n(289);function o(e){const t=new Set;return e.querySelectorAll("a[href*=amazon], a[href*=ebay]").forEach(e=>{(0,r.isAmazonDomain)(e.hostname)?t.add("link-amazon"):(0,r.isEbayDomain)(e.hostname)&&t.add("link-ebay")}),t}},849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){const o=new s(e,n).mount;return{"mount-onboarding":()=>"loading"!==e.document.readyState?o():(0,r.callWhenDOMContentLoaded)(o)}};var r=n(289);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=e=>null==e?void 0:e.trim();class s{constructor(e,t){o(this,"_isMounted",!1),o(this,"_removeOffersOnClick",()=>{const e=this._window.document.body.dataset.offersToRemove;var t;e&&(this._CLIQZ.app.modules["offers-v2"].action("deleteOnboardingOffers",null==(t=e)?void 0:t.split(",").map(i).filter(Boolean)),this._isMounted&&this._unmount())}),o(this,"_unmount",()=>{this._isMounted&&(this._window.removeEventListener("unload",this._unmount),this._window.document.body.removeEventListener("click",this._removeOffersOnClick),this._isMounted=!1)}),o(this,"mount",()=>{this._isMounted||(this._window.document.body.addEventListener("click",this._removeOffersOnClick),this._window.addEventListener("unload",this._unmount),this._isMounted=!0)}),this._window=e,this._CLIQZ=t}}},850:function(e,t,n){"use strict";var r,o=n(152),i=(r=n(851))&&r.__esModule?r:{default:r};function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n){const r=e.offerId,o=e.config,i=e.autoTrigger,s=e.data,c=((e,t)=>{let n=t.type,r=t.offerId,o=t.autoTrigger;return t=>{e.app.modules["offers-banner"].action("send",n,r,t,o)}})(t,{type:o.type,offerId:r,autoTrigger:i}),l=s.isPair?a({},s,{popup:a({},s.popup,{autoTrigger:i})}):a({},s,{autoTrigger:i});n.showBanner({config:o,onaction:c,payload:l})}(0,o.registerContentScript)({module:"offers-banner",matches:["http://*/*","https://*/*"],allFrames:!0,js:[function(e,t,n){if(e.top!==e)return{};const r=new i.default({window:e});return{renderBanner:(t=>{e.document&&"loading"!==e.document.readyState?l(t,n,r):e.addEventListener("DOMContentLoaded",()=>l(t,n,r))}).bind(this),closeBanner:()=>r.removeBanner()}}]})},851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(852))&&r.__esModule?r:{default:r};t.default=class{constructor(e){let t=e.window;!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"onmessage",e=>{this.onaction(e),this._dispatcher(e)}),this.onaction=null,this.config=null,this.payload=null,this.window=t,this.observer=null,this.onmessage=this.onmessage.bind(this),this.removeBanner=this.removeBanner.bind(this)}unload(){this.onaction=null,this.window=null,this.config=null,this.payload=null,this.observer&&this.observer.unload(),this.observer=null}showBanner(e){let t=e.config,n=e.onaction,r=e.payload;this.observer||(this.config=t,this.onaction=n,this.payload=r,this.observer=new o.default({onmessage:this.onmessage,onaction:this.onaction,window:this.window,config:this.config,payload:this.payload}))}removeBanner(){this.observer&&(this.observer.unload(),this.observer=null)}_closePopupIf(e){let t=e.closePopup;void 0!==t&&t&&this.removeBanner()}_closeBoxIf(e){let t=e.noVouchersLeft;void 0!==t&&t&&this.removeBanner()}_closePanelIf(e){"offer_closed"===e.element_id&&this.removeBanner()}_dispatcher(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.handler,r=e.action;const o="browser-panel"===this.config.type;if(!t||!(o?n:r))return;const i={"offers-cc":{openURL:this._closePopupIf.bind(this),getEmptyFrameAndData:this._closeBoxIf.bind(this),hideBanner:this.removeBanner},"browser-panel":{offersIFrameHandler:this._closePanelIf.bind(this)},"offers-reminder":{hideBanner:this.removeBanner},"offers-checkout":{hideBanner:e=>{let t=e.timeout,n=void 0===t?0:t;return n?setTimeout(this.removeBanner,n):this.removeBanner()}}};i[this.config.type]&&(i[this.config.type][o?n:r]||(()=>{}))(t)}}},852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(853))&&r.__esModule?r:{default:r},i=n(463),s=n(464),a=n(83);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){d(i,r,o,s,a,"next",e)}function a(e){d(i,r,o,s,a,"throw",e)}s(void 0)}))}}t.default=class{constructor(e){let t=e.window,n=e.onmessage,r=e.onaction,i=e.config,s=e.payload;this.onaction=r,this.onmessage=n,this.window=t,this.payload=s,this.view=new o.default({onaction:r,window:t,config:i}),this.config=i,this._onvisibilitychange=this._onvisibilitychange.bind(this),this._onscroll=(0,a.throttle)(t,this._onscroll.bind(this),200),this._onmessage=this._onmessage.bind(this),this.init()}init(){this.window.addEventListener("message",this._onmessage,!0),this.window.document.addEventListener("visibilitychange",this._onvisibilitychange),this.window.document.addEventListener("scroll",this._onscroll),this.view.render(this._getBannerId())}unload(){this.window.removeEventListener("message",this._onmessage,!0),this.window.document.removeEventListener("visibilitychange",this._onvisibilitychange),this.window.document.removeEventListener("scroll",this._onscroll),this.window=null,this.onaction=null,this.onmessage=null,this.config=null,this.view.unload(),this.view=null}_onmessage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.origin;if(!t||!this.config.url.startsWith(n))return;const r=JSON.parse(t),o=r.target,i=r.origin,s=r.message,a=void 0===s?{}:s;o===({"offers-cc":"cliqz-offers-templates","browser-panel":"cqz-browser-panel-re","offers-reminder":"cliqz-offers-templates","offers-checkout":"cliqz-offers-templates"}[this.config.type]||"cliqz-offers-templates")&&"iframe"===i&&(this._dispatcher(a),this.onmessage(a))}_send(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hideTooltip,t=void 0!==e&&e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.payload;if(t)this.view.sendToIframe(n.popup);else{const e=n.isPair?n.tooltip:n;this.view.sendToIframe(e),this.view.makeVisible()}}_restyleTimeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.restyle,n=e.timeout,r=void 0===n?0:n;if(!t)return;const o=()=>this.view.restyle(t);return r?setTimeout(o,r):o()}_sendTimeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=()=>this._send(e,t);return e.timeout?setTimeout(n,e.timeout):n()}_tryInjectCouponIf(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).view,t=arguments.length>1?arguments[1]:void 0;return f((function*(){return"checkout"===e?(0,s.retryFunctionSeveralTimes)(window,()=>(0,s.tryToFindCoupon)(window,t)):{ok:!0,payload:{}}}))()}_logInjectCouponFailedIf(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.onaction({action:"log",data:{action:"coupon_autofill_field_failed",back:this.payload.back}})}_dispatcher(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,r=t.handler,o=t.action;if(!n||!(this._isBrowserPanel()?r:o))return;const a={"offers-cc":{resize:this.view.resize.bind(this.view),getEmptyFrameAndData:this._send.bind(this)},"browser-panel":{offersIFrameHandler:this._send.bind(this),show:e=>{this.view.resize(e),(0,i.beforeIframeShown)(this.window)}},"offers-reminder":{changePositionWithAnimation:this.view.changePositionWithAnimation.bind(this.view),changePosition:this.view.changePosition.bind(this.view),resize:this.view.resize.bind(this.view),getEmptyFrameAndData:this._send.bind(this)},"offers-checkout":{resize:this.view.resize.bind(this.view),injectCode:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.injectCode)(window,l({},e.payload.back,{},t))},newView:function(){var t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(null===(t=e.config.products)||void 0===t?void 0:t.chip)&&(e._restyleTimeout(n),e._sendTimeout(n,l({},e.payload,{view:n.view})))},getEmptyFrameAndData:(c=f((function*(t){if("checkout"!==e.payload.view)return e._send(t);const n=yield e._tryInjectCouponIf(e.payload,e.payload.back),r=n.ok,o=n.payload;r&&(e._logInjectCouponFailedIf(!1===o.canInject),e._send(t,l({},e.payload,{},o)))})),function(e){return c.apply(this,arguments)})}};var c;a[this.config.type]&&(a[this.config.type][this._isBrowserPanel()?r:o]||(()=>{}))(n)}_getBannerId(){const e=this.config.products||{};return(["chip","cliqz","amo","ghostery"].find(t=>e[t])||"myoffrz")+"-offers-banner"}_onvisibilitychange(){if(!this._isBrowserPanel())return;const e=this.window.document.getElementById(this._getBannerId()),t="visible"===this.window.document.visibilityState;e&&t&&this.onaction({handler:"offerShown",data:{}})}_onscroll(){if(!this._isBrowserPanel())return;this.window.document.getElementById(this._getBannerId())&&(0,i.onScroll)(this.window,this.window.pageYOffset)}_isBrowserPanel(){return"browser-panel"===this.config.type}}},853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(463),o=n(464),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(855));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const l={"offers-cc":200,"browser-panel":200,"offers-reminder":350,"offers-checkout":200};t.default=class{constructor(e){let t=e.onaction,n=e.window,r=e.config;this.window=n,this.onaction=t,this.iframe=null,this.wrapper=null,this.config=r}unload(){"browser-panel"===this.config.type&&(0,r.afterIframeRemoved)(this.window),this.iframe.remove(),this.wrapper.remove(),this.iframe=null,this.window=null,this.onaction=null,this.config=null}makeVisible(){setTimeout(()=>{const e="browser-panel"===this.config.type;this.wrapper.style.opacity=1,this.iframe.style.opacity=1,e&&(this.onaction({handler:"offerShown",data:{}}),this.onaction({handler:"offersFirstAppearance",data:{}})),i.animate(this.config.type,this.wrapper,this.config.styles)},l[this.config.type]||50)}resize(e){let t=e.width,n=e.height,r=e.suffix,o=void 0===r?"px":r;this.iframe.style.height=`${n}${o}`,this.iframe.style.width=`${t}${o}`}changePositionWithAnimation(e){let t=e.deltaRight,n=void 0===t?0:t,r=e.duration;const o=Number((this.wrapper.style.right||"0").replace(/\D/g,"")),s={animation:!0,duration:r,first:o,last:o+n};i.animate(this.config.type,this.wrapper,s)}changePosition(e){let t=e.deltaRight,n=void 0===t?0:t,r=e.allowNegativeRight,o=void 0!==r&&r;const i=Number((this.wrapper.style.right||"0").replace(/\D/g,""));!o&&i+n<0||(this.wrapper.style.right=i+n+"px")}restyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.wrapper.style,i.wrapper(this.config.type,e)),Object.assign(this.iframe.style,i.banner(this.config.type,e)),setTimeout(()=>{this.wrapper.style.opacity=1,this.iframe.style.opacity=1},l[this.config.type]||50)}sendToIframe(e){const t=a({"offers-cc":["cliqz-offers-templates","pushData"],"browser-panel":["cqz-browser-panel-re","render_template"],"offers-reminder":["cliqz-offers-templates","pushData"],"offers-checkout":["cliqz-offers-templates","pushData"]}[this.config.type]||["cliqz-offers-templates","pushData"],2),n=t[0],r=t[1];this.iframe.contentWindow.postMessage(JSON.stringify({target:n,origin:"window",message:{action:r,data:e}}),"*")}render(e){if(this.window.document.getElementById(e))return;let t=(0,o.createElement)(this.window,{tag:"div",id:e});const n=(0,o.createElement)(this.window,{tag:"iframe"});Object.assign(t.style,i.wrapper(this.config.type,this.config.styles)),Object.assign(n.style,i.banner(this.config.type,this.config.styles)),this.window.document.body.appendChild(t),this.wrapper=t,this.iframe=n;const r=this.window.document.head;(r.createShadowRoot||r.attachShadow)&&(t=t.attachShadow({mode:"closed"})),n.frameBorder=0,n.style.height="0px",t.appendChild(n),n.src=this.config.url}}},854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementByConfigFieldName=i,t.getCouponsForm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.document,r=i(n,t.inputID),s=i(n,t.submitID);if(r&&s)return{ok:!0,input:r,button:s};const a=[...e.document.querySelectorAll("form")],c=a.reduce((e,t)=>t?e.ok?e:o(t,r,s):e,{ok:!1,input:null,button:null});return c};const r=["voucher","discount","coupon","rabatt","gutschein","promo"];function o(e,t,n){let o=t;if(!t){const t=function(e){const t=e.querySelectorAll("input"),n=(e,t)=>e&&e.toLowerCase().includes(t);return[...t].filter(e=>"hidden"!==e.type&&"password"!==e.type&&r.some(t=>n(e.name,t)||n(e.id,t)))}(e);if(1!==t.length)return{ok:!1,input:null,button:null};o=t[0]}let i=n;if(!n){const t=function(e){let t=e.querySelectorAll("button");return t.length||(t=e.querySelectorAll("input[type=submit]")),t}(e);if(1!==t.length&&2!==t.length)return{ok:!1,input:null,button:null};i=t[0]}return{ok:!0,input:o,button:i}}function i(e,t){return t?e.getElementById(t)||e.querySelector(t):null}},855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animate=t.wrapper=t.banner=void 0;var r=c(n(856)),o=c(n(857)),i=c(n(858)),s=c(n(859));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}const l={"offers-cc":r,"browser-panel":o,"offers-reminder":i,"offers-checkout":s};t.banner=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(l[e]||o).banner(t)};t.wrapper=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(l[e]||o).wrapper(t)};t.animate=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(l[e]||o).animate(t,n)}},856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapper=function(){return{position:"fixed",top:"20px",right:"330px","z-index":"2147483647",opacity:"0"}},t.banner=function(){return{position:"fixed","z-index":"2147483647",transition:"opacity 200ms ease-in",opacity:"0","box-shadow":"rgba(0, 0, 0, 0.19) 3px 2px 13px 2px","border-radius":"8px"}},t.animate=function(){}},857:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapper=function(){return{position:"absolute",top:"0",left:"0",width:"100%","z-index":"2147483647",opacity:"0",margin:"0",padding:"0"}},t.banner=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.blueTheme,n=void 0===t||t;return{width:"100%",height:"100%",transition:"all 200ms ease-in",opacity:"0",background:n?"#00AEF0":"#cccccc","box-shadow":"inset rgba(0, 0, 0, 0.19) 0px 2px 4px 2px"}},t.animate=function(){}},858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapper=function(e){let t=e.isHidden;return{position:"fixed",top:"60px",right:(void 0===t||t?16:346)+"px","z-index":"2147483647",opacity:"0",width:"10px",height:"10px"}},t.banner=function(){return{position:"relative","z-index":"2147483647",transition:"opacity 200ms ease-in",opacity:"0"}},t.animate=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.animation,r=void 0!==n&&n,o=t.first,i=void 0===o?16:o,s=t.last,a=void 0===s?346:s,c=t.duration,l=void 0===c?450:c;if(!r)return;if(!e.animate)return void(e.style.right=a+"px");const u=e.animate([{right:i+"px"},{right:a+"px"}],{duration:l,easing:"ease-out"});u.onfinish=()=>{e.style.right=a+"px"}}},859:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.wrapper=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fullscreen,n=void 0!==t&&t;const r={top:"0px",right:"0px",opacity:"1"};return o({position:"fixed",top:"60px",right:"346px","z-index":"2147483647",opacity:"0"},n?r:{})},t.banner=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fullscreen,n=void 0!==t&&t;const r={top:"0px",bottom:"0px",right:"0px",left:"0px",width:"100%",height:"100%",border:"none",margin:"0px",padding:"0px",overflow:"hidden"},i={top:"unset",bottom:"unset",right:"unset",left:"unset",margin:"unset"};return o({position:"fixed","z-index":"2147483647",transition:"opacity 200ms ease-in",opacity:"0"},n?r:i)},t.animate=function(){}},860:function(e,t,n){"use strict";var r,o=(r=n(861))&&r.__esModule?r:{default:r};function i(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}(0,n(152).registerContentScript)({module:"adblocker",matches:["http://*/*","https://*/*"],matchAboutBlank:!0,allFrames:!0,js:[(e,t,n)=>{(0,o.default)(e,!0,function(){var e,t=(e=function*(e){return(yield n.app.modules.adblocker.action("getCosmeticsFilters",e))||{}},function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,c,"next",e)}function c(e){i(s,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}())}]})},861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.injectCosmetics}});var r=n(986)},862:function(e,t,n){"use strict";var r=n(152);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const o=chrome.runtime.getURL("/modules/anti-phishing/phishing-warning.html?u=");(0,r.registerContentScript)({module:"anti-phishing",matches:["http://*/*","https://*/*"],js:[(e,t,n)=>{n.app.modules["anti-phishing"].action("isPhishingURL",e.location.href).then(t=>{let n=t.block,r=t.type;n&&"phishingURL"===r&&(e.location=`${o}${encodeURIComponent(e.location)}`)})}]})},863:function(e,t,n){"use strict";var r=n(152);class o{constructor(e,t){this.window=e,this.document=e.document,this.backgroundModule=t,this.categoriesRules=[],this.refetchUrl=null}sendToBackground(e){let t=e.categories,n=e.titles,r=e.links,o=e.productId,i=e.prefix,s=e.price;(t.length>0||n.length>0||r.length>0||this.refetchUrl)&&this.backgroundModule.action("handleCategories",{categories:t,titles:n,linkIds:r,productId:o,fromContent:!0,prefix:i,fetchUrl:this.refetchUrl,rules:this.categoriesRules,price:s})}extractCategroyFromElement(e,t,n){if(!e)return[];const r=new RegExp(`[${String.fromCharCode(8250)}|>|\n]`),o=String.fromCharCode(8249);if(!n&&(e.hidden||e.offsetTop>250))return[];const i=e.textContent.trim();if(i.indexOf(o)>-1)return t&&!this.refetchUrl&&(this.refetchUrl=document.head.querySelector("link[rel='canonical']").getAttribute("href")),[];let s=i.split(r).map(e=>e.trim()).filter(e=>""!==e).join(" > ");return 0===s.indexOf("in")&&(s=s.slice(3)),[s]}getCategories(e,t){const n=this.document.querySelectorAll(e);let r=[];return n.forEach(e=>{r=r.concat(this.extractCategroyFromElement(e,t,!1))}),r=r.reduce((e,t)=>e.concat(t),[]),[...new Set(r)]}getTitles(e){const t=[];return this.document.querySelectorAll(e).forEach(e=>{t.push(e.textContent.trim())}),t}getLinks(e,t){const n=[];return this.document.querySelectorAll(e).forEach(e=>{const r=e.href;if(t){const e=new RegExp(t).exec(r);if(e)return void n.push(e[1])}n.push(r)}),n}getPrice(e){const t=this.document.querySelector(e).textContent.trim().match(/[\d,.]+/g);if(t&&t.length>0){const e=t[0].split(/[,.]/);return e.length>1&&2===e[e.length-1].length&&(e[e.length-1]="."+e[e.length-1]),e.join("")}return null}handleRules(e){let t=e.rules,n=e.productId,r=e.prefix;const o=()=>{let e=[],o=[],i=[],s=null;this.categoriesRules=t.category,t.category&&t.category.length>0&&(e=t.category.map(e=>this.getCategories(e,t.refetch)),e=e.reduce((e,t)=>e.concat(t),[]),e=[...new Set(e)]),t.title&&t.title.length>0&&t.title.forEach(e=>{o=o.concat(this.getTitles(e))}),t.link&&t.link.length>0&&t.link.forEach(e=>{i=i.concat(this.getLinks(e,t.linkIdRegex))}),t.price&&t.price.length>0&&t.price.some(e=>(s=this.getPrice(e),!!s)),this.sendToBackground({categories:e,titles:o,links:i,productId:n,prefix:r,price:s})};t&&(t.waitForLoad&&"complete"!==this.document.readyState?this.window.addEventListener("load",()=>{o()}):o())}}(0,r.registerContentScript)({module:"myoffrz-helper",matches:["http://*/*","https://*/*"],js:[function(e,t,n){const r=n.app.modules["myoffrz-helper"],i=new o(e,r);return{rulesFromBackground:e=>{i.handleRules(e)}}}]})},864:function(e,t,n){"use strict";var r=n(152),o=n(112);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function i(e){const t=document.location,n=t.host,r=t.hostname,o=t.pathname,i=t.protocol,s=performance.timing.domContentLoadedEventStart-performance.timing.requestStart||0;e.app.modules.insights.action("recordPageInfo",{domain:`${i}//${n}${o}`,host:r,timestamp:performance.timing.navigationStart,latency:s,pageTiming:{timing:{navigationStart:performance.timing.navigationStart,loadEventEnd:performance.timing.loadEventEnd}}})}(0,r.registerContentScript)({module:"insights",matches:["http://*/*","https://*/*"],js:[function(e,t,n){"complete"!==document.readyState?e.addEventListener("load",()=>{(0,o.setTimeout)(()=>{i(n)},1)}):i(n)}]})},865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("html"!==r.window.document.documentElement.nodeName.toLowerCase())return;const e=new i.default;new Promise(e=>{void 0!==r.window.CLIQZ?e(r.window.CLIQZ):(r.window.runCliqz=e,o.default.sendMessage({module:"core",action:"status"}).then(e=>({app:e})).then(e,()=>{}))}).then(t=>{for(var n=0,i=Object.entries(t.app.modules);n<i.length;n++){const e=(a=i[n],l=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(a,l)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t=e[0];e[1].action=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.default.sendMessage({module:t,action:e,args:r})}}var a,l;e.setActionCallbacks((0,s.runContentScripts)(r.window,r.chrome,t)),r.window.addEventListener("unload",()=>{e.unload()},{once:!0})})};var r=n(462),o=a(n(202)),i=a(n(866)),s=n(152);function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(867)),o=i(n(202));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}class u{constructor(){var e,t,n;n=5e3,(t="MAX_BUFFER_LEN")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.buffer=[],this.onMessage=e=>this.buffer.length<this.MAX_BUFFER_LEN?new Promise((t,n)=>{this.buffer.push({message:e,resolve:t,reject:n})}):Promise.reject(new Error(`content-script actions buffer limit exceeded: ${this.buffer.length} ${this.MAX_BUFFER_LEN}`))}init(){o.default.onMessage.addListener(this.onMessage)}unload(){o.default.onMessage.removeListener(this.onMessage)}}t.default=class{constructor(){this.actions=null,this.messageHandlers=[new u];var e,t=a(this.messageHandlers);try{for(t.s();!(e=t.n()).done;){e.value.init()}}catch(e){t.e(e)}finally{t.f()}}unload(){var e,t=a(this.messageHandlers);try{for(t.s();!(e=t.n()).done;){e.value.unload()}}catch(e){t.e(e)}finally{t.f()}this.messageHandlers=[]}setActionCallbacks(e){const t=this.messageHandlers[0].buffer;this.unload();for(var n=0,o=Object.entries(e);n<o.length;n++){const e=s(o[n],2),l=e[0],u=e[1],d=new r.default(l,u);var i,c=a(t);try{for(c.s();!(i=c.n()).done;){const e=i.value,t=e.message,n=e.resolve,r=e.reject,o=d.onMessage(t);void 0!==o&&o.then(n).catch(r)}}catch(e){c.e(e)}finally{c.f()}d.init(),this.messageHandlers.push(d)}}}},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(202))&&r.__esModule?r:{default:r};t.default=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
class{constructor(e,t){this.onMessage=n=>{if(n.module===e){const e=t[n.action];if(void 0!==e){let t=n.args||[];return void 0!==n.message&&(t=[n.message]),Promise.resolve(e(...t))}}}}init(){o.default.onMessage.addListener(this.onMessage)}unload(){o.default.onMessage.removeListener(this.onMessage)}}},986:function(e,t,n){"use strict";n.r(t),n.d(t,"injectCosmetics",(function(){return u}));class r{constructor(e){this.cb=e,this.knownIds=new Set,this.knownHrefs=new Set,this.knownClasses=new Set,this.observer=null}queryAll(e){this.handleNewNodes(Array.from(e.document.querySelectorAll("[id],[class],[href]")))}start(e){null===this.observer&&void 0!==e.MutationObserver&&(this.observer=new e.MutationObserver(e=>{this.handleNewNodes(
/*!
 * Copyright (c) 2017-2019 Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){const t=[];for(let n=0;n<e.length;n+=1){const r=e[n];if("attributes"===r.type)t.push(r.target);else if("childList"===r.type){const e=r.addedNodes;for(let n=0;n<e.length;n+=1){const r=e[n];if(t.push(r),void 0!==r.querySelectorAll){const e=r.querySelectorAll("[id],[class],[href]");for(let n=0;n<e.length;n+=1)t.push(e[n])}}}}return t}(e))}),this.observer.observe(e.document.documentElement,{attributeFilter:["class","id","href"],attributes:!0,childList:!0,subtree:!0}))}stop(){null!==this.observer&&(this.observer.disconnect(),this.observer=null)}handleNewFeatures({hrefs:e,ids:t,classes:n}){const r=[],o=[],i=[];for(let e=0;e<t.length;e+=1){const n=t[e];!1===this.knownIds.has(n)&&(r.push(n),this.knownIds.add(n))}for(let e=0;e<n.length;e+=1){const t=n[e];!1===this.knownClasses.has(t)&&(o.push(t),this.knownClasses.add(t))}for(let t=0;t<e.length;t+=1){const n=e[t];!1===this.knownHrefs.has(n)&&(i.push(n),this.knownHrefs.add(n))}return(0!==r.length||0!==o.length||0!==i.length)&&(this.cb({classes:o,hrefs:i,ids:r}),!0)}handleNewNodes(e){return this.handleNewFeatures(function(e){const t=new Set(["br","head","link","meta","script","style"]),n=new Set,r=new Set,o=new Set;for(let i=0;i<e.length;i+=1){const s=e[i];if(1!==s.nodeType)continue;if(void 0!==s.localName&&t.has(s.localName))continue;const a=s.id;a&&o.add(a);const c=s.classList;if(c)for(let e=0;e<c.length;e+=1)n.add(c[e]);const l=s.href;"string"==typeof l&&r.add(l)}return{classes:Array.from(n),hrefs:Array.from(r),ids:Array.from(o)}}(e))}}function o(e,t){const n=t.createElement("script");n.type="text/javascript",n.id="cliqz-adblocker-script",n.async=!1,n.appendChild(t.createTextNode(function(e){return`try{${e}}catch(c){}!function(){var c=document.currentScript,e=c&&c.parentNode;e&&e.removeChild(c)}();`}(e)));const r=t.head||t.documentElement;null!==r&&r.appendChild(n)}
/*!
 * Copyright (c) 2017-2019 Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */let i=!0,s=null;function a(){null!==s&&(s.stop(),s=null)}function c({classes:e,hrefs:t,ids:n,lifecycle:r}){return new Promise(o=>{chrome.runtime.sendMessage({action:"getCosmeticsFilters",classes:e,hrefs:t,ids:n,lifecycle:r},e=>{void 0!==e&&o(e)})})}function l(e,{active:t,scripts:n,styles:r}){if(!1===t)return i=!1,void a();if(i=!0,n)for(let t=0;t<n.length;t+=1)setTimeout(()=>o(n[t],e.document),0);r&&r.length>0&&setTimeout(()=>function(e,t){const n=t.head||t.getElementsByTagName("head")[0]||t.documentElement;if(null!==n){const r=t.createElement("style");r.type="text/css",r.id="cliqz-adblokcer-css-rules",r.appendChild(t.createTextNode(e)),n.appendChild(r)}}(r,e.document),0)}function u(e,t=!0,n=c){n({lifecycle:"start",ids:[],classes:[],hrefs:[]}).then(t=>l(e,t)),e.addEventListener("DOMContentLoaded",()=>{s=new r(({classes:t,ids:r,hrefs:o})=>{n({classes:t,hrefs:o,ids:r,lifecycle:"dom-update"}).then(t=>l(e,t))}),s.queryAll(e),i&&t&&s.start(e)},{once:!0,passive:!0}),e.addEventListener("unload",a,{once:!0,passive:!0})}}});